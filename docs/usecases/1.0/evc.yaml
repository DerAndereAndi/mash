name: EVC
fullName: EV Charging
specVersion: "1.0"
description: >
  Comprehensive EV charging management: monitoring, limits, setpoints,
  bidirectional V2G, and coordinated charging via price signals and plans.
  Replaces EEBUS CEVC, DBEVC, EVSOC, OPEV, OSCEV, EVCC, EVSECC.

endpointTypes:
  - EV_CHARGER

features:
  - feature: EnergyControl
    required: true
    attributes:
      - name: acceptsLimits
        requiredValue: true
      - name: acceptsSetpoints
      - name: acceptsCurrentLimits
      - name: acceptsCurrentSetpoints
    commands:
      - setLimit
      - clearLimit
      - setSetpoint
      - clearSetpoint
      - setCurrentLimits
      - clearCurrentLimits
    subscriptions:
      - controlState
      - effectiveConsumptionLimit
      - effectiveProductionLimit
      - effectiveConsumptionSetpoint
      - effectiveProductionSetpoint

  - feature: ChargingSession
    required: true
    attributes:
      - name: evDemandMode
      - name: evMinEnergyRequest
      - name: evMaxEnergyRequest
      - name: evTargetEnergyRequest
      - name: evDepartureTime
      - name: evStateOfCharge
      - name: evBatteryCapacity
      - name: evMinStateOfCharge
      - name: evTargetStateOfCharge
      - name: evMinDischargingRequest
      - name: evMaxDischargingRequest
      - name: evDischargeBelowTargetPermitted
    commands:
      - setChargingMode
    subscriptions:
      - state
      - evStateOfCharge
      - evDemandMode
      - evMinStateOfCharge
      - evTargetStateOfCharge

  - feature: Signals
    required: false
    commands:
      - sendPriceSignal
      - sendConstraintSignal
    subscriptions:
      - priceSlots
      - constraintSlots

  - feature: Plan
    required: false
    commands:
      - requestPlan
      - acceptPlan
    subscriptions:
      - commitment
      - slots

  - feature: Electrical
    required: true
    attributes:
      - name: nominalMaxConsumption
      - name: nominalMaxProduction

  - feature: Measurement
    required: true
    subscriptions:
      - acActivePower

commands:
  - setpoint
  - limit
  - clear
